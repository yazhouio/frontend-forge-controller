apiVersion: v1
kind: Namespace
metadata:
  name: frontend-forge-system
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend-forge-controller
  namespace: frontend-forge-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/name: frontend-forge-controller
  template:
    metadata:
      labels:
        app.kubernetes.io/name: frontend-forge-controller
    spec:
      serviceAccountName: frontend-forge-controller
      containers:
        - name: controller
          image: ghcr.io/example/frontend-forge-controller:latest
          imagePullPolicy: IfNotPresent
          env:
            - name: RUNNER_IMAGE
              value: ghcr.io/example/frontend-forge-runner:latest
            - name: RUNNER_SERVICE_ACCOUNT
              value: frontend-forge-runner
            - name: BUILD_SERVICE_BASE_URL
              value: http://build-service.default.svc.cluster.local
            - name: BUILD_SERVICE_TIMEOUT_SECONDS
              value: "600"
            - name: STALE_CHECK_GRACE_SECONDS
              value: "30"
            - name: RECONCILE_REQUEUE_SECONDS
              value: "5"
            - name: JOB_TTL_SECONDS_AFTER_FINISHED
              value: "600"
